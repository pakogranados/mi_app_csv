{% extends 'base.html' %}

{% block content %}
<h2>Compra de Materias Primas</h2>

<form method="POST" action="">
    <div class="mb-3">
        <label>Proveedor</label>
        <input type="text" name="proveedor" class="form-control" required>
    </div>
    <div class="mb-3">
        <label>Fecha</label>
        <input type="date" name="fecha" class="form-control" required>
    </div>
    <div class="mb-3">
        <label>NÃºmero de Factura</label>
        <input type="text" name="numero_factura" class="form-control" required>
    </div>

    <h4>Productos</h4>
    <table class="table">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Unidades</th>
                <th>Precio Unitario</th>
            </tr>
        </thead>
        <tbody id="productos-table">
            <tr>
                <td><input type="text" name="productos[]" class="form-control" required></td>
                <td><input type="number" step="0.01" name="unidades[]" class="form-control" required></td>
                <td><input type="number" step="0.01" name="precios[]" class="form-control" required></td>
            </tr>
        </tbody>
    </table>

    <button type="button" class="btn btn-secondary" onclick="agregarFila()">Agregar Producto</button>
    <button type="submit" class="btn btn-primary">Guardar Compra</button>
</form>

<script>
function agregarFila() {
    let row = `
        <tr>
            <td><input type="text" name="productos[]" class="form-control" required></td>
            <td><input type="number" step="0.01" name="unidades[]" class="form-control" required></td>
            <td><input type="number" step="0.01" name="precios[]" class="form-control" required></td>
        </tr>
    `;
    document.getElementById('productos-table').insertAdjacentHTML('beforeend', row);
}
</script>
{% endblock %}
