{# templates/detalle_compra_popup.html #}
<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title>Detalle de la Compra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4">
    <h4 class="mb-3">Detalles de la Compra</h4>

    <div class="mb-3">
        <p class="mb-1"><strong>Proveedor:</strong> {{ compra.proveedor }}</p>
        <p class="mb-1"><strong>Fecha:</strong> {{ compra.fecha }}</p>
        <p class="mb-1"><strong>Número de Factura:</strong> {{ compra.numero_factura }}</p>
        <p class="mb-1"><strong>Total:</strong> ${{ "%.2f"|format(compra.total or 0) }}</p>
    </div>

    <div class="table-responsive">
        <table class="table table-sm table-bordered align-middle">
            <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>Producto</th>
                    <th class="text-end">Unidades</th>
                    <th class="text-end">Contenido Neto</th>
                    <th class="text-end">P. Unitario</th>
                    <th class="text-end">Importe</th>
                </tr>
            </thead>
            <tbody>
                {% for d in detalles %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ d.producto }}</td>
                    <td class="text-end">{{ "%.2f"|format(d.unidades or 0) }}</td>
                    <td class="text-end">{{ "%.2f"|format(d.contenido_neto_total or 0) }}</td>
                    <td class="text-end">${{ "%.2f"|format(d.precio_unitario or 0) }}</td>
                    <td class="text-end">${{ "%.2f"|format(d.precio_total or 0) }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-center text-muted">Sin conceptos en esta compra.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-3">
        <a href="{{ url_for('listado_compras') }}" class="btn btn-secondary">← Volver</a>
    </div>
</body>

</html>