<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Editar Cuenta Contable</title>
</head>

<body>
    <h2>Editar Cuenta Contable</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <form method="POST">
        <label for="nombre">Nombre:</label><br>
        <input type="text" name="nombre" value="{{ cuenta.nombre }}" required><br><br>

        <label for="numero_cuenta">Número de cuenta (###-###-###):</label><br>
        <input type="text" name="numero_cuenta" value="{{ cuenta.numero_cuenta }}" pattern="\d{3}-\d{3}-\d{3}" required
            title="Formato: 100-000-000"><br><br>

        <label for="tipo">Tipo:</label><br>
        <select name="tipo" required>
            <option value="cuenta" {% if cuenta.tipo=='cuenta' %}selected{% endif %}>Cuenta</option>
            <option value="subcuenta" {% if cuenta.tipo=='subcuenta' %}selected{% endif %}>Subcuenta</option>
        </select><br><br>

        <label for="nivel">Nivel:</label><br>
        <select name="nivel" required>
            <option value="1" {% if cuenta.nivel==1 %}selected{% endif %}>1 - Cuenta principal</option>
            <option value="2" {% if cuenta.nivel==2 %}selected{% endif %}>2 - Cuenta hija</option>
            <option value="3" {% if cuenta.nivel==3 %}selected{% endif %}>3 - Subcuenta</option>
        </select><br><br>

        <label for="padre_id">Cuenta padre (opcional):</label><br>
        <select name="padre_id">
            <option value="">Sin padre</option>
            {% for p in padres %}
            <option value="{{ p.id }}" {% if cuenta.padre_id==p.id %}selected{% endif %}>
                {{ p.numero_cuenta }} - {{ p.nombre }}
            </option>
            {% endfor %}
        </select><br><br>

        <button type="submit">Guardar cambios</button>
    </form>

    <br>
    <a href="/cuentas_contables">← Volver a cuentas contables</a>
</body>

</html>